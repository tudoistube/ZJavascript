<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title> fadeInOut 갤러리 </title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<style>
body {
	margin:20px auto;
	padding:0;
	width:620px;
	background:#192839;
}
/* ...201p.이미지가 inline 형식이므로 가로로 배치되어야 하지만, fadeShow 클래스의
           width 설정으로 밑으로 내려감.*/
.fadeShow {
	background:#666;
	width:600px;
	height:350px;
	border:2px solid #FDF6DD;
}
/* ...201p.각각의 이미지를 한장으로 모으려면 position 을 absolute 로 설정함.
           absolute 가 적용되면 문서 흐름에서 벗어나 하나의 공간에 함께 있을 수 있고,
					 z-index 로 상하를 구분할 수 있음. */
.fadeShow img{position:absolute;}
/* ...199p.이미지의 깊이(z-index)를 맨 위로 변경시키는 방법.
   ...201p.이미지 갤러리 동작에서 현재 보이는 사진의 다음 사진이 맨 위로 올라오게
	         할 때 동적으로 적용됨. */
.fadeShow .active{
   	z-index:1;
}

</style>
</head>

<body>

<div class="fadeShow">
     <img class="active" src="imagesPart03/slide1.jpg" alt="image1" />
     <img src="imagesPart03/slide2.jpg" alt="image2" />
     <img src="imagesPart03/slide3.jpg" alt="image3" />
</div>


<!---------- jQuery code Start ---------->
<script>
	var showImg, nextImg;

	function fadeInOut(){
		// ...202p.:eq(INDEX) 에서 INDEX 는 0부터 시작함(89p).
		showImg = $(".fadeShow img:eq(0)");
		nextImg = $(".fadeShow img:eq(1)");

		nextImg.addClass("active");
		// ...203p.불투명도를 0으로 해서 이미지가 보이지 않게 함.
		nextImg.css("opacity", "0")
		/* ...203p.animate() 를 사용해서 1초 동안 불투명도가 0에서 1로 변경시키면서
		           나타나고, 이 함수가 끝나면 콜백함수를 실행함. */
		       .animate({opacity:1},
						 				1000,
						 				function(){
											/* ...203p.fadeShow 안에서 showImg 이미지를 태그의
											맨 마지막으로 이동시키고, active 클래스를 제거해야만
											z-index 를 원래 상태로 돌려놓을 수 있음. */
						 					$(".fadeShow").append(showImg); //...콜백함수.
											showImg.removeClass("active");  //...콜백함수.
					 					});

	}//E.function fadeInOut(){

	var timer = setInterval("fadeInOut()", 3000);

	/* ...205p.이미지에 마우스를 오버하면 사진 전환이 멈추고, 마우스가 아웃되면 다시
	           사진전환이 시작됨.*/
	$("div.fadeShow").hover(
		function(){ //...마우스오버함수.
			clearInterval(timer); 
		},
		function(){ //...마우스아웃함수.
			timer = setInterval("fadeInOut()", 2000)
		}
	);

</script>
</body>
</html>
